# Ephemeral Time: 注意力の貯水池

![License](https://img.shields.io/badge/License-MIT-blue.svg) ![JavaScript](https://img.shields.io/badge/JavaScript-F7DF1E?logo=javascript&logoColor=000) ![Version](https://img.shields.io/badge/Version-0.2.0-blue) ![GitHub stars](https://img.shields.io/github/stars/salieri009/EphemeralTime) ![GitHub issues](https://img.shields.io/github/issues/salieri009/EphemeralTime)

![p5.js](https://img.shields.io/badge/p5%20js-ED225D?style=for-the-badge&logo=p5dotjs&logoColor=white) ![HTML5](https://img.shields.io/badge/HTML5-E34F26?style=for-the-badge&logo=html5&logoColor=white) ![CSS3](https://img.shields.io/badge/CSS3-1572B6?style=for-the-badge&logo=css3&logoColor=white)

[한국어](README.ko.md) | [English](README.en.md) | [日本語](README.ja.md)

**主観的で心理的な時間**をインタラクティブな可視化で探求する大学プロジェクトです。キャンバスは、あなたのインタラクションが時間の流れと現れ方を直接形作る「注意力の貯水池」です。

## コアコンセプト

この可視化は、時間を客観的で機械的な定数から**心理的体験**へと変換します:

- **穏やかな状態(集中した心)**: インタラクションしなければ、流体は滑らかに流れ、色は鮮やかで、インク滴は深い跡を残します。時間はゆっくりで意味深く感じられます。
- **乱流状態(散漫な心)**: マウスを素早くドラッグすると、混沌を注入します。流体は乱流となり、色は褪せ、滴は素早く消えます。時間は速く、忘れられやすく感じられます。

**あなたのインタラクションは、あなた自身の注意力を映す鏡になります。**

## 主要機能 (v0.2)

### 1. 太陽の滴 (時間の可読性)
- 毎時の開始時に輝く滴が出現
- 60分間かけて画面上部をゆっくり横断
- 他の滴を押しのける斥力場を生成
- 直感的で数字のない時間読み取りを提供

### 2. チャイム滴 (15分単位マーカー)
- 毎時15、30、45分に特別な滴が出現
- それぞれがキャンバス全体に強力な波紋効果を生成
- 合成されたチャイム音が再生
- リズミカルな時間アンカーを提供

### 3. 乱流システム (注意力フィードバック)
- リアルタイムでマウス速度を追跡
- 速く混沌とした動きがシステムに「乱流」を注入
- 流体力学、色の彩度、オーディオの複雑さに影響
- インタラクションを止めるとゆっくり減衰
- **これが主観的時間体験の核心**

### 4. ジェネレーティブオーディオ
- 合成された滴音(分によってピッチが変化)
- アンビエントサウンドスケープ(乱流によって調整)
- 15分単位のチャイム音
- オーディオファイル不要; すべての音がリアルタイム生成
│   └── Audio.js         # オーディオ効果管理（将来実装）
│
├── lib/                 # 外部ライブラリ
│   ├── p5.js            # p5.js ライブラリ
│   └── p5.sound.js      # p5.sound ライブラリ
│
└── sounds/              # オーディオファイル（将来追加）
    ├── drop.mp3
    └── ambience.mp3
```

---

## コア機能

### 1. **時間管理 (Clock.js)**
- 現在のシステム時間追跡
- 「新しい秒」検知 → 新しいインク滴生成
- 「新しい時間」検知 → 時間洗浄効果トリガー
- 時間進行率(hourProgress)返却（視覚/聴覚効果用）

### 2. **インク滴 (InkDrop.js)**
- 個別インク滴の状態管理（位置、サイズ、色、不透明度、寿命）
- 流体フィールドの影響を受けて移動
- 時間経過とともに徐々に透明化

### 3. **流体シミュレーション (Fluid.js)**
- Perlin Noise ベースベクトルフィールド生成
- 時間による滑らかな基本流
- マウスインタラクションで渦効果作成

### 4. **オーディオ (Audio.js - 将来実装)**
- インク滴生成時のサウンド効果
- 時間帯別アンビエントサウンド
- マウス速度ベース効果変調

---

## 視覚レイヤー構造（パフォーマンス最適化）

**毎時間3600個のオブジェクトを処理するために3つの `p5.Graphics` レイヤーを使用：**

| レイヤー | 名前 | 役割 | 更新頻度 |
|----------|------|------|----------|
| 1 | `bgLayer` | 背景（紙質感） | setup() / 毎正時 |
| 2 | `historyLayer` | 蓄積インク（過去） | インク滴「死亡時」 |
| 3 | `activeLayer` | アクティブインク（現在） | 毎フレーム |

**レンダリング順序：** bgLayer → historyLayer → activeLayer

---

## 時間帯別カラーパレット

| 時間帯 | 主色 | 副色 |
|--------|------|------|
| 00:00 ~ 06:00 (深夜~夜明け) | 濃紺 (`#1a1a2e`) | 青 (`#0f3460`) |
| 06:00 ~ 12:00 (朝~正午) | 黄 (`#ffd93d`) | オレンジ (`#ff6b6b`) |
| 12:00 ~ 18:00 (午後) | 緑 (`#6bcf7f`) | シアン (`#4d96ff`) |
| 18:00 ~ 24:00 (夕方~夜) | 紫 (`#a855f7`) | ピンク (`#ec4899`) |

---

## 技術スタック

- **p5.js**: キャンバスレンダリングおよび基本グラフィック
- **JavaScript (ES6+)**: 全モジュール開発
- **Perlin Noise**: 流体シミュレーション
- **p5.sound**: オーディオ効果（将来）

---

## 開発進捗状況

- [x] プロジェクト構造設計
- [ ] Clock.js 実装
- [ ] InkDrop.js 実装
- [ ] Fluid.js 実装
- [ ] sketch.js メインlogic実装
- [ ] HTML & CSS 作成
- [ ] Audio.js 実装およびサウンドファイル追加
- [ ] 時間洗浄効果詳細調整

---

## 実行方法

1. プロジェクトディレクトリを開く
2. ローカルサーバー実行（例: `python -m http.server 8000`）
3. ブラウザで `http://localhost:8000` にアクセス

---

## 注意事項

- 全モジュールは独立してテスト可能に設計
- パフォーマンス最適化のためグラフィックレイヤー分離
- 将来GLSLシェーダーにアップグレード可能な構造</content>
<parameter name="filePath">d:\UTS\p5j\EphemeralTime\README.ja.md